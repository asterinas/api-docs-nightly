<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Changes an inode mode."><title>chmod in aster_kernel::fs::utils::inode_mode - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="aster_kernel" data-themes="" data-resource-suffix="" data-rustdoc-version="1.94.0-nightly (1aa9bab4e 2025-12-05)" data-channel="nightly" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">chmod</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../aster_kernel/index.html">aster_<wbr>kernel</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">chmod</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#syntax" title="Syntax">Syntax</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In aster_<wbr>kernel::<wbr>fs::<wbr>utils::<wbr>inode_<wbr>mode</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">aster_kernel</a>::<wbr><a href="../../index.html">fs</a>::<wbr><a href="../index.html">utils</a>::<wbr><a href="index.html">inode_mode</a></div><h1>Macro <span class="macro">chmod</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/aster_kernel/fs/utils/inode_mode.rs.html#146-172">Source</a> </span></div><pre class="rust item-decl"><code>macro_rules! chmod {
    ($mode:expr) =&gt; { ... };
    ($mode:expr, $who:ident + $perms:ident $(, $($rest:tt)*)?) =&gt; { ... };
    ($mode:expr, $who:ident - $perms:ident $(, $($rest:tt)*)?) =&gt; { ... };
    ($mode:expr, $who:ident = $perms:ident $(, $($rest:tt)*)?) =&gt; { ... };
    ($mode:expr, $who:ident = $(, $($rest:tt)*)?) =&gt; { ... };
    (@apply $mode:expr, $who:ident, $op:expr, $perms:ident $(, $($rest:tt)*)?) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Changes an inode mode.</p>
<h2 id="syntax"><a class="doc-anchor" href="#syntax">§</a>Syntax</h2>
<p>If you are familiar with the <code>chmod</code> tool, the syntax of the <code>chmod</code> macro
should appear natural and self-explaining.</p>
<p>The <code>chmod</code> macro takes two or more arguments. The first argument is an
initial value of the inode mode. The rest arguments are one or more
symbolic mode, each of which dictates how the current value of the inode
mode shall be changed.</p>
<p>The format of a symbolic mode is as follows:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>[ugoa][+-=][perms]</code></pre></div>
<p>where <code>[perms]</code> is either zero or more letters from <code>rwx</code>.</p>
<p>The user part, <code>[ugoa]</code>,
controls the target users whose access to the file will be changed:</p>
<ul>
<li><code>u</code>: the user who owns it;</li>
<li><code>g</code>: other users in the file owner’s group;</li>
<li><code>o</code>: other users not in the file owner’s group;</li>
<li><code>a</code>: all users.</li>
</ul>
<p>The operator part, <code>[+-=]</code>,
indicates how the file permission bits are changed:</p>
<ul>
<li><code>+</code>: <code>[perms]</code> are added to the target users’ permissions;</li>
<li><code>-</code>: <code>[perms]</code> are removed from the target users’ permissions;</li>
<li><code>=</code>: <code>[perms]</code> are set to the target users’ permissions.</li>
</ul>
<p>The permission part, <code>[perms]</code>, is a combination of <code>rwx</code>.</p>
<ul>
<li><code>r</code>: the read permission;</li>
<li><code>w</code>: the write permission;</li>
<li><code>x</code>: the execute/search permission.</li>
</ul>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Add the read and write permissions to everyone
</span><span class="kw">let </span>mode0 = <span class="macro">mkmod!</span>(a+rw);
<span class="macro">assert!</span>(mode0.bits() == <span class="number">0o666</span>);

<span class="comment">// Add the execute permissions to the owner user
</span><span class="kw">let </span>mode1 = <span class="macro">chmod!</span>(mode0, u+x);
<span class="macro">assert!</span>(mode1.bits() == <span class="number">0o766</span>);

<span class="comment">// Combine the above two steps into one invocation
</span><span class="kw">let </span>mode2 = <span class="macro">mkmod!</span>(a+rw, u+x);
<span class="macro">assert!</span>(mode2.bits() == <span class="number">0o766</span>);</code></pre></div></div></details></section></div></main></body></html>