<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait to abstract sized and unsized structures (DSTs). It enables casting a `DynSizedStructure` to sized or unsized structures using `DynSizedStructure::cast`."><title>MaybeDynSized in multiboot2_common - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-cf3c48c1.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="multiboot2_common" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (854f22563 2025-01-31)" data-channel="nightly" data-search-js="search-2d513d54.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-302de22f.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-9b5d7e41.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../multiboot2_common/index.html">multiboot2_<wbr>common</a><span class="version">0.3.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Maybe<wbr>DynSized</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#abi" title="ABI">ABI</a></li></ul><h3><a href="#required-associated-consts">Required Associated Constants</a></h3><ul class="block"><li><a href="#associatedconstant.BASE_SIZE" title="BASE_SIZE">BASE_SIZE</a></li></ul><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Header" title="Header">Header</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.dst_len" title="dst_len">dst_len</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.as_bytes" title="as_bytes">as_bytes</a></li><li><a href="#method.as_ptr" title="as_ptr">as_ptr</a></li><li><a href="#method.header" title="header">header</a></li><li><a href="#method.payload" title="payload">payload</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate multiboot2_<wbr>common</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">multiboot2_common</a></div><h1>Trait <span class="trait">MaybeDynSized</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/multiboot2_common/tag.rs.html#24-79">Source</a> </span></div><pre class="rust item-decl"><code>pub trait MaybeDynSized: <a class="trait" href="../ptr_meta/trait.Pointee.html" title="trait ptr_meta::Pointee">Pointee</a> {
    type <a href="#associatedtype.Header" class="associatedtype">Header</a>: <a class="trait" href="trait.Header.html" title="trait multiboot2_common::Header">Header</a>;

    const <a href="#associatedconstant.BASE_SIZE" class="constant">BASE_SIZE</a>: usize;

    // Required method
    fn <a href="#tymethod.dst_len" class="fn">dst_len</a>(header: &amp;Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a>) -&gt; Self::<a class="associatedtype" href="../ptr_meta/trait.Pointee.html#associatedtype.Metadata" title="type ptr_meta::Pointee::Metadata">Metadata</a>;

    // Provided methods
    fn <a href="#method.header" class="fn">header</a>(&amp;self) -&gt; &amp;Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.payload" class="fn">payload</a>(&amp;self) -&gt; &amp;[u8] { ... }
<span class="item-spacer"></span>    fn <a href="#method.as_bytes" class="fn">as_bytes</a>(&amp;self) -&gt; <a class="struct" href="struct.BytesRef.html" title="struct multiboot2_common::BytesRef">BytesRef</a>&lt;'_, Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.as_ptr" class="fn">as_ptr</a>(&amp;self) -&gt; *const Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a> { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait to abstract sized and unsized structures (DSTs). It enables
casting a <a href="struct.DynSizedStructure.html" title="struct multiboot2_common::DynSizedStructure"><code>DynSizedStructure</code></a> to sized or unsized structures using
<a href="struct.DynSizedStructure.html#method.cast" title="method multiboot2_common::DynSizedStructure::cast"><code>DynSizedStructure::cast</code></a>.</p>
<p>Structs that are a DST must provide a <strong>correct</strong> <a href="trait.MaybeDynSized.html#tymethod.dst_len" title="associated function multiboot2_common::MaybeDynSized::dst_len"><code>MaybeDynSized::dst_len</code></a>
implementation.</p>
<h2 id="abi"><a class="doc-anchor" href="#abi">§</a>ABI</h2>
<p>Implementors <strong>must</strong> use <code>#[repr(C)]</code>. As there might be padding necessary
for the proper Rust layout, <code>size_of_val(&amp;self)</code> might report additional
padding bytes that are not reflected by the actual payload. These additional
padding bytes however will be reflected in corresponding <a href="struct.BytesRef.html" title="struct multiboot2_common::BytesRef"><code>BytesRef</code></a>
instances.</p>
</div></details><h2 id="required-associated-consts" class="section-header">Required Associated Constants<a href="#required-associated-consts" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedconstant.BASE_SIZE" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#38">Source</a><h4 class="code-header">const <a href="#associatedconstant.BASE_SIZE" class="constant">BASE_SIZE</a>: usize</h4></section></summary><div class="docblock"><p>The true base size of the struct without any implicit or additional
padding. Note that <code>size_of::&lt;T&gt;()</code> isn’t sufficient, as for example
the type could have three <code>u32</code> fields, which would add an implicit
<code>u32</code> padding. However, this constant <strong>must always</strong> fulfill
<code>BASE_SIZE &gt;= size_of::&lt;Self::Header&gt;()</code>.</p>
<p>The main purpose of this constant is to create awareness when you
implement <a href="trait.MaybeDynSized.html#tymethod.dst_len"><code>Self::dst_len</code></a>, where you should use this. If this value
is correct, we prevent situations where we read uninitialized bytes,
especially when creating tags in builders.</p>
</div></details></div><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Header" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#26">Source</a><h4 class="code-header">type <a href="#associatedtype.Header" class="associatedtype">Header</a>: <a class="trait" href="trait.Header.html" title="trait multiboot2_common::Header">Header</a></h4></section></summary><div class="docblock"><p>The associated <a href="trait.Header.html" title="trait multiboot2_common::Header"><code>Header</code></a> of this tag.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.dst_len" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#47">Source</a><h4 class="code-header">fn <a href="#tymethod.dst_len" class="fn">dst_len</a>(header: &amp;Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a>) -&gt; Self::<a class="associatedtype" href="../ptr_meta/trait.Pointee.html#associatedtype.Metadata" title="type ptr_meta::Pointee::Metadata">Metadata</a></h4></section></summary><div class="docblock"><p>Returns the amount of items in the dynamically sized portion of the
DST. Note that this is not the amount of bytes. So if the dynamically
sized portion is 16 bytes in size and each element is 4 bytes big, then
this function must return 4.</p>
<p>For sized tags, this just returns <code>()</code>. For DSTs, this returns an
<code>usize</code>.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.header" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#50-53">Source</a><h4 class="code-header">fn <a href="#method.header" class="fn">header</a>(&amp;self) -&gt; &amp;Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a></h4></section></summary><div class="docblock"><p>Returns the corresponding <a href="trait.Header.html" title="trait multiboot2_common::Header"><code>Header</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.payload" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#57-60">Source</a><h4 class="code-header">fn <a href="#method.payload" class="fn">payload</a>(&amp;self) -&gt; &amp;[u8]</h4></section></summary><div class="docblock"><p>Returns the payload, i.e., all memory that is not occupied by the
<a href="trait.Header.html" title="trait multiboot2_common::Header"><code>Header</code></a> of the type.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_bytes" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#65-73">Source</a><h4 class="code-header">fn <a href="#method.as_bytes" class="fn">as_bytes</a>(&amp;self) -&gt; <a class="struct" href="struct.BytesRef.html" title="struct multiboot2_common::BytesRef">BytesRef</a>&lt;'_, Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the whole allocated bytes for this structure encapsulated in
<a href="struct.BytesRef.html" title="struct multiboot2_common::BytesRef"><code>BytesRef</code></a>. This includes padding bytes. To only get the “true” tag
data, read the tag size from <a href="trait.MaybeDynSized.html#method.header"><code>Self::header</code></a> and create a sub slice.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.as_ptr" class="method"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#76-78">Source</a><h4 class="code-header">fn <a href="#method.as_ptr" class="fn">as_ptr</a>(&amp;self) -&gt; *const Self::<a class="associatedtype" href="trait.MaybeDynSized.html#associatedtype.Header" title="type multiboot2_common::MaybeDynSized::Header">Header</a></h4></section></summary><div class="docblock"><p>Returns a pointer to this structure.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-MaybeDynSized-for-DummyDstTag" class="impl"><a class="src rightside" href="../src/multiboot2_common/test_utils.rs.html#103-111">Source</a><a href="#impl-MaybeDynSized-for-DummyDstTag" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.MaybeDynSized.html" title="trait multiboot2_common::MaybeDynSized">MaybeDynSized</a> for <a class="struct" href="test_utils/struct.DummyDstTag.html" title="struct multiboot2_common::test_utils::DummyDstTag">DummyDstTag</a></h3></section></summary><div class="impl-items"><section id="associatedconstant.BASE_SIZE-1" class="associatedconstant trait-impl"><a class="src rightside" href="../src/multiboot2_common/test_utils.rs.html#106">Source</a><a href="#associatedconstant.BASE_SIZE-1" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.BASE_SIZE" class="constant">BASE_SIZE</a>: usize = 8usize</h4></section><section id="associatedtype.Header-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/multiboot2_common/test_utils.rs.html#104">Source</a><a href="#associatedtype.Header-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Header" class="associatedtype">Header</a> = <a class="struct" href="test_utils/struct.DummyTestHeader.html" title="struct multiboot2_common::test_utils::DummyTestHeader">DummyTestHeader</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-MaybeDynSized-for-DynSizedStructure%3CH%3E" class="impl"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#95-103">Source</a><a href="#impl-MaybeDynSized-for-DynSizedStructure%3CH%3E" class="anchor">§</a><h3 class="code-header">impl&lt;H: <a class="trait" href="trait.Header.html" title="trait multiboot2_common::Header">Header</a>&gt; <a class="trait" href="trait.MaybeDynSized.html" title="trait multiboot2_common::MaybeDynSized">MaybeDynSized</a> for <a class="struct" href="struct.DynSizedStructure.html" title="struct multiboot2_common::DynSizedStructure">DynSizedStructure</a>&lt;H&gt;</h3></section></summary><div class="impl-items"><section id="associatedconstant.BASE_SIZE-2" class="associatedconstant trait-impl"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#98">Source</a><a href="#associatedconstant.BASE_SIZE-2" class="anchor">§</a><h4 class="code-header">const <a href="#associatedconstant.BASE_SIZE" class="constant">BASE_SIZE</a>: usize</h4></section><section id="associatedtype.Header-2" class="associatedtype trait-impl"><a class="src rightside" href="../src/multiboot2_common/tag.rs.html#96">Source</a><a href="#associatedtype.Header-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Header" class="associatedtype">Header</a> = H</h4></section></div></details></div><script src="../trait.impl/multiboot2_common/tag/trait.MaybeDynSized.js" async></script></section></div></main></body></html>