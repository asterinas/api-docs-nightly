<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A convenience macro for implementing `SysObj` and `SysNode` trait for a `SysTree` leaf type through inheriting the implementation of the target field."><title>inherit_sys_leaf_node in aster_systree - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="aster_systree" data-themes="" data-resource-suffix="" data-rustdoc-version="1.94.0-nightly (1aa9bab4e 2025-12-05)" data-channel="nightly" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">inherit_sys_leaf_node</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../aster_systree/index.html">aster_<wbr>systree</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">inherit_<wbr>sys_<wbr>leaf_<wbr>node</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate aster_<wbr>systree</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">aster_systree</a></div><h1>Macro <span class="macro">inherit_<wbr>sys_<wbr>leaf_<wbr>node</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/aster_systree/utils.rs.html#419-468">Source</a> </span></div><pre class="rust item-decl"><code>macro_rules! inherit_sys_leaf_node {
    ($struct_name:ident, $field:ident, {$($fn_override:item)*}) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A convenience macro for implementing <a href="trait.SysObj.html" title="trait aster_systree::SysObj"><code>SysObj</code></a> and <a href="trait.SysNode.html" title="trait aster_systree::SysNode"><code>SysNode</code></a> trait for a <code>SysTree</code> leaf type
through inheriting the implementation of the target field.</p>
<p>Users must ensures the target field is a <a href="struct.NormalNodeFields.html" title="struct aster_systree::NormalNodeFields"><code>NormalNodeFields</code></a> type.</p>
<p>This macro takes three parameters. The first two parameters correspond to:</p>
<ol>
<li>The name of the struct that implements the <code>SysObj</code> trait,</li>
<li>The name of the field to be inherited,</li>
</ol>
<p>The third parameter is used to implement the required trait methods or override default
implementations. For <code>SysObj</code> and <code>SysNode</code> traits, some of their methods require users
to implement them within this macro, some methods provide default implementations that users
can override, and some methods provide default implementations that users cannot override.
The breakdown is as follows:</p>
<ul>
<li>Methods that require users to implement:
<ul>
<li><a href="trait.SysNode.html#tymethod.perms" title="method aster_systree::SysNode::perms"><code>SysNode::perms</code></a></li>
</ul>
</li>
<li>Methods with default implementations that users can override:
<ul>
<li><a href="trait.SysObj.html#method.is_root" title="method aster_systree::SysObj::is_root"><code>SysObj::is_root</code></a></li>
<li><a href="trait.SysObj.html#tymethod.init_parent" title="method aster_systree::SysObj::init_parent"><code>SysObj::init_parent</code></a></li>
<li><a href="trait.SysNode.html#tymethod.is_attr_absent" title="method aster_systree::SysNode::is_attr_absent"><code>SysNode::is_attr_absent</code></a></li>
<li><a href="trait.SysNode.html#tymethod.read_attr" title="method aster_systree::SysNode::read_attr"><code>SysNode::read_attr</code></a></li>
<li><a href="trait.SysNode.html#tymethod.write_attr" title="method aster_systree::SysNode::write_attr"><code>SysNode::write_attr</code></a></li>
<li><a href="trait.SysNode.html#tymethod.read_attr_at" title="method aster_systree::SysNode::read_attr_at"><code>SysNode::read_attr_at</code></a></li>
<li><a href="trait.SysNode.html#tymethod.write_attr_at" title="method aster_systree::SysNode::write_attr_at"><code>SysNode::write_attr_at</code></a></li>
</ul>
</li>
<li>Other methods are provided with default implementations that users cannot override.</li>
</ul>
<p>Here, “default implementations” refer to either directly inheriting the implementation of a
method with the same name from the target <code>field</code> or, in the absence of a method with the same
name, the default implementation provided by the trait.</p>
<p>Note that for the <code>SysNode</code> trait, <code>read_attr</code> can be automatically implemented in terms of <code>read_attr_at</code>,
and <code>write_attr_at</code> can be automatically implemented in terms of <code>write_attr</code> since most
sysfs attributes do not support partial writes and will ignore the <code>offset</code>. Therefore, it is <strong>recommended</strong>
to override the <code>read_attr_at</code> and <code>write_attr</code> methods. In addition, users can use
[<code>aster_util::printer::VmPrinter</code>] to easily handle the <code>offset</code> when overriding the <code>read_attr_at</code> method.</p>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// // A struct representing a `SysTree` leaf node.
</span><span class="kw">struct </span>LeafNode {
    fields: NormalNodeFields&lt;<span class="kw">dyn </span>SysObj, <span class="self">Self</span>&gt;,
    <span class="comment">// ... other fields
</span>}

<span class="macro">inherit_sys_leaf_node!</span>(
  LeafNode,      <span class="comment">// The struct name.
  </span>fields,        <span class="comment">// The field to be inherited.
  </span>{
     <span class="kw">fn </span>perms(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; SysPerms {
       SysPerms::DEFAULT_RW_PERMS
     }
  } <span class="comment">// Override the `perms` method.
</span>);</code></pre></div></div></details></section></div></main></body></html>