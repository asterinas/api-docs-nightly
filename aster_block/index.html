<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The block devices of Asterinas. an abstraction of block devices, as well as the registration and lookup of block devices."><title>aster_block - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="aster_block" data-themes="" data-resource-suffix="" data-rustdoc-version="1.94.0-nightly (1aa9bab4e 2025-12-05)" data-channel="nightly" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate aster_block</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../aster_block/index.html">aster_<wbr>block</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>aster_<wbr>block</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/aster_block/lib.rs.html#3-168">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The block devices of Asterinas.
an abstraction of block devices, as well as the registration and lookup of block devices.</p>
<p>Block devices use a queue-based model for asynchronous I/O operations. It is necessary
for a block device to maintain a queue to handle I/O requests. The users (e.g., fs)
submit I/O requests to this queue and wait for their completion. Drivers implementing
block devices can create their own queues as needed, with the possibility to reorder
and merge requests within the queue.</p>
<p>This crate also offers the <code>Bio</code> related data structures and APIs to accomplish
safe and convenient block I/O operations, for example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Creates a bio request.
</span><span class="kw">let </span>bio = Bio::new(BioType::Write, sid, segments, <span class="prelude-val">None</span>);
<span class="comment">// Submits to the block device.
</span><span class="kw">let </span>bio_waiter = bio.submit(block_device)<span class="question-mark">?</span>;
<span class="comment">// Waits for the the completion.
</span><span class="kw">let </span><span class="prelude-val">Some</span>(status) = bio_waiter.wait() <span class="kw">else </span>{
    <span class="kw">return </span><span class="prelude-val">Err</span>(IoError);
};
<span class="macro">assert!</span>(status == BioStatus::Complete);</code></pre></div></div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="bio/index.html" title="mod aster_block::bio">bio</a></dt><dt><a class="mod" href="id/index.html" title="mod aster_block::id">id</a></dt><dt><a class="mod" href="request_queue/index.html" title="mod aster_block::request_queue">request_<wbr>queue</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BlockDeviceMeta.html" title="struct aster_block::BlockDeviceMeta">Block<wbr>Device<wbr>Meta</a></dt><dd>Metadata for a block device.</dd><dt><a class="struct" href="struct.MajorIdOwner.html" title="struct aster_block::MajorIdOwner">Major<wbr>IdOwner</a></dt><dd>An owned major ID.</dd><dt><a class="struct" href="struct.PartitionNode.html" title="struct aster_block::PartitionNode">Partition<wbr>Node</a></dt></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Error.html" title="enum aster_block::Error">Error</a></dt><dd>The error type which is returned from the APIs of this crate.</dd><dt><a class="enum" href="enum.PartitionInfo.html" title="enum aster_block::PartitionInfo">Partition<wbr>Info</a></dt><dd>Represents a partition entry.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.BLOCK_SIZE.html" title="constant aster_block::BLOCK_SIZE">BLOCK_<wbr>SIZE</a></dt><dt><a class="constant" href="constant.SECTOR_SIZE.html" title="constant aster_block::SECTOR_SIZE">SECTOR_<wbr>SIZE</a></dt></dl><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><dl class="item-table"><dt><a class="static" href="static.EXTENDED_DEVICE_ID_ALLOCATOR.html" title="static aster_block::EXTENDED_DEVICE_ID_ALLOCATOR">EXTENDED_<wbr>DEVICE_<wbr>ID_<wbr>ALLOCATOR</a></dt></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.BlockDevice.html" title="trait aster_block::BlockDevice">Block<wbr>Device</a></dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.acquire_major.html" title="fn aster_block::acquire_major">acquire_<wbr>major</a></dt><dd>Acquires a major ID.</dd><dt><a class="fn" href="fn.allocate_major.html" title="fn aster_block::allocate_major">allocate_<wbr>major</a></dt><dd>Allocates a major ID.</dd><dt><a class="fn" href="fn.collect_all.html" title="fn aster_block::collect_all">collect_<wbr>all</a></dt><dd>Collects all block devices.</dd><dt><a class="fn" href="fn.lookup.html" title="fn aster_block::lookup">lookup</a></dt><dd>Looks up a block device of a given device ID.</dd><dt><a class="fn" href="fn.register.html" title="fn aster_block::register">register</a></dt><dd>Registers a new block device.</dd><dt><a class="fn" href="fn.unregister.html" title="fn aster_block::unregister">unregister</a></dt><dd>Unregisters an existing block device, returning the device if found.</dd></dl></section></div></main></body></html>