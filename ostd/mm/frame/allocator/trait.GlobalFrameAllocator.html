<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The trait for the global frame allocator."><title>GlobalFrameAllocator in ostd::mm::frame::allocator - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="ostd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.94.0-nightly (1aa9bab4e 2025-12-05)" data-channel="nightly" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">GlobalFrameAllocator</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../ostd/index.html">ostd</a><span class="version">0.17.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Global<wbr>Frame<wbr>Allocator</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.add_free_memory" title="add_free_memory">add_free_memory</a></li><li><a href="#tymethod.alloc" title="alloc">alloc</a></li><li><a href="#tymethod.dealloc" title="dealloc">dealloc</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In ostd::<wbr>mm::<wbr>frame::<wbr>allocator</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">ostd</a>::<wbr><a href="../../index.html">mm</a>::<wbr><a href="../index.html">frame</a>::<wbr><a href="index.html">allocator</a></div><h1>Trait <span class="trait">Global<wbr>Frame<wbr>Allocator</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/ostd/mm/frame/allocator.rs.html#146-176">Source</a> </span></div><pre class="rust item-decl"><code>pub trait GlobalFrameAllocator: Sync {
    // Required methods
    fn <a href="#tymethod.alloc" class="fn">alloc</a>(&amp;self, layout: Layout) -&gt; Option&lt;<a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.dealloc" class="fn">dealloc</a>(&amp;self, addr: <a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>, size: usize);
<span class="item-spacer"></span>    fn <a href="#tymethod.add_free_memory" class="fn">add_free_memory</a>(&amp;self, addr: <a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>, size: usize);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The trait for the global frame allocator.</p>
<p>OSTD allows a customized frame allocator by the <a href="../../../attr.global_frame_allocator.html" title="attr ostd::global_frame_allocator"><code>global_frame_allocator</code></a>
attribute, which marks a static variable of this type.</p>
<p>The API mimics the standard Rust allocator API (<a href="core::alloc::GlobalAlloc"><code>GlobalAlloc</code></a> and
[<code>global_allocator</code>]). However, this trait is much safer. Double free
or freeing in-use memory through this trait only messes up the allocator’s
state rather than causing undefined behavior.</p>
<p>Whenever OSTD or other modules need to allocate or deallocate frames via
<a href="struct.FrameAllocOptions.html" title="struct ostd::mm::frame::allocator::FrameAllocOptions"><code>FrameAllocOptions</code></a>, they are forwarded to the global frame allocator.
It is not encouraged to call the global allocator directly.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.alloc" class="method"><a class="src rightside" href="../../../../src/ostd/mm/frame/allocator.rs.html#154">Source</a><h4 class="code-header">fn <a href="#tymethod.alloc" class="fn">alloc</a>(&amp;self, layout: Layout) -&gt; Option&lt;<a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>&gt;</h4></section></summary><div class="docblock"><p>Allocates a contiguous range of frames.</p>
<p>The caller guarantees that <code>layout.size()</code> is aligned to <a href="../../constant.PAGE_SIZE.html" title="constant ostd::mm::PAGE_SIZE"><code>PAGE_SIZE</code></a>.</p>
<p>When any of the allocated memory is not in use, OSTD returns them by
calling <a href="trait.GlobalFrameAllocator.html#tymethod.dealloc" title="method ostd::mm::frame::allocator::GlobalFrameAllocator::dealloc"><code>GlobalFrameAllocator::dealloc</code></a>. If multiple frames are
allocated, they may be returned in any order with any number of calls.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.dealloc" class="method"><a class="src rightside" href="../../../../src/ostd/mm/frame/allocator.rs.html#167">Source</a><h4 class="code-header">fn <a href="#tymethod.dealloc" class="fn">dealloc</a>(&amp;self, addr: <a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>, size: usize)</h4></section></summary><div class="docblock"><p>Deallocates a contiguous range of frames.</p>
<p>The caller guarantees that <code>addr</code> and <code>size</code> are both aligned to
<a href="../../constant.PAGE_SIZE.html" title="constant ostd::mm::PAGE_SIZE"><code>PAGE_SIZE</code></a>. The deallocated memory should always be allocated by
<a href="trait.GlobalFrameAllocator.html#tymethod.alloc" title="method ostd::mm::frame::allocator::GlobalFrameAllocator::alloc"><code>GlobalFrameAllocator::alloc</code></a>. However, if
<a href="trait.GlobalFrameAllocator.html#tymethod.alloc" title="method ostd::mm::frame::allocator::GlobalFrameAllocator::alloc"><code>GlobalFrameAllocator::alloc</code></a> returns multiple frames, it is possible
that some of them are deallocated before others. The deallocated memory
must never overlap with any memory that is already deallocated or
added, without being allocated in between.</p>
<p>The deallocated memory can be uninitialized.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.add_free_memory" class="method"><a class="src rightside" href="../../../../src/ostd/mm/frame/allocator.rs.html#175">Source</a><h4 class="code-header">fn <a href="#tymethod.add_free_memory" class="fn">add_free_memory</a>(&amp;self, addr: <a class="type" href="../../type.Paddr.html" title="type ostd::mm::Paddr">Paddr</a>, size: usize)</h4></section></summary><div class="docblock"><p>Adds a contiguous range of frames to the allocator.</p>
<p>The memory being added must never overlap with any memory that was
added before.</p>
<p>The added memory can be uninitialized.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../../../trait.impl/ostd/mm/frame/allocator/trait.GlobalFrameAllocator.js" async></script></section></div></main></body></html>